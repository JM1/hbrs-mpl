# Copyright (c) {{ now.year }} Jakob Meng, <jakobmeng@web.de>
#
# Redistribution and use is allowed according to the terms of the BSD license.
# For details see the accompanying COPYING-CMAKE-SCRIPTS file.
#

{%- if srcs %}

#################### build ####################

target_sources(hbrs_mpl PRIVATE
{%- for src in srcs %}
    {{ src.name }}
{%- endfor -%}
)
{% endif -%}

{%- if benchmarks %}

#################### benchmarks ####################

foreach(name
{%- for benchmark in benchmarks %}
    {{ benchmark.stem }}
{%- endfor -%}
)
    hbrs_mpl_add_benchmark(benchmark_{{ category }}_{{ component.name }}_${name} "${name}.cpp")
endforeach()

{% endif -%}

{%- if tests or test %}

#################### tests ####################

{% if test -%}
hbrs_mpl_add_test({{ category }}_{{ component.name }} "test.cpp")
{% endif -%}

{%- if tests -%}

foreach(name
{%- for test in tests %}
    {{ test.stem }}
{%- endfor -%}
)
    hbrs_mpl_add_test({{ category }}_{{ component.name }}_${name} "${name}.cpp")
endforeach()
{% endif -%}

{% endif -%}

{%- if sub_dirs %}

#################### list the subdirectories ####################

{% for sub_dir in sub_dirs -%}
add_subdirectory({{ sub_dir.name }})
{% endfor %}
{%- endif %}

{%- if not (srcs or sub_dirs or benchmarks or test or tests) %}

# BLANK
{% endif %}
